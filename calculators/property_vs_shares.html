<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Property vs Shares | Tepuy Solutions</title>

  <!-- global CSS & favicon -->
  <link rel="stylesheet" href="/css/tepuy.css" />
  <link rel="icon" href="/img/favicon.png" type="image/png" />

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://js.stripe.com/v3/"></script>

  <!-- ‚ñ∏ 1. auto-unlock if URL contains ?code=abc123 -->
  <script>
    const qp = new URLSearchParams(location.search);
    if (qp.get('code') === 'abc123') localStorage.setItem('pvProPaid', 'yes');
  </script>
</head>
<body>

<!-- ‚îÄ‚îÄ‚îÄ NAVBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<header class="navbar">
  <div class="logo-title">
    <img src="/img/tepuy_logo.png" class="logo" alt="Tepuy logo">
    Tepuy Solutions
  </div>
  <nav class="nav-links" id="navMenu">
    <a class="active" href="/">Home</a>
    <div class="has-sub">
      <button type="button" class="sub-toggle">Calculators ‚ñæ</button>
      <div class="sub-menu">
        <a class="active" href="/calculators/property_vs_shares.html">Property&nbsp;vs&nbsp;Shares</a>
        <a href="/calculators/retirement.html">Retirement Goal</a>
      </div>
    </div>
    <a href="/blog/">Blog</a>
    <a href="/store/">Store</a>
    <a href="/about.html">Who We Are</a>
    <a href="/contact.html">Contact Us</a>
  </nav>
  <button id="menuToggle" class="hamburger" aria-label="Menu">&#9776;</button>
</header>

<!-- ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<section class="hero">
  <div class="hero-banner">
    <h1>Property Investment vs Shares Calculator</h1>
    <p>Project net-worth growth in real estate versus an index-fund portfolio.</p>
  </div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<main class="calc-wrapper">
  <!-- ‚îÄ‚îÄ INPUT FORM ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <form id="investmentForm" class="grid-3col">
    <label>Loan Amount <input id="loanAmount" value="800,000" /></label>
    <label>Down-payment (%) <input id="downpayment" type="number" value="10" step=".1" /></label>
    <label>Stamp Duty &amp; Costs ($) <input id="buyingCosts" value="48,000" /></label>
    <label>Loan Period (yrs) <input id="loanPeriod" type="number" value="30" /></label>
    <label>Interest Rate (%) <input id="loanInterestRate" type="number" value="6.5" step=".1" /></label>
    <label>Owning Costs (%/yr) <input id="owningCosts" type="number" value="2" step=".1" /></label>
    <label>Agent Fees (%/yr) <input id="agentFees" type="number" value="0.2" step=".1" /></label>
    <label>Occupancy Rate (%) <input id="occupancyRate" type="number" value="90" /></label>
    <label>Appreciation Rate (%/yr) <input id="propertyAppreciation" type="number" value="6.5" step=".1" /></label>
    <label>Rental Yield (%/yr) <input id="rentalIncome" type="number" value="4.8" step=".1" /></label>
    <label>Shares Return (%/yr) <input id="stockMarketAppreciation" type="number" value="11" step=".1" /></label>
    <label>Tax Bracket (%) <input id="taxBracket" type="number" value="30" step=".1" /></label>
    <label>Years to Retirement <input id="yearsToRetirement" type="number" value="30" /></label>
    <label class="pro-only locked"><input type="checkbox" id="sellAtRet" disabled> Sell assets at retirement (apply CGT)</label>
    <label>Building Component (%) <input id="buildingComponent" type="number" value="50" /></label>
    <label>Sale Costs (% of sale price) <input id="saleCostPct" type="number" value="2.5" step=".1"></label>
  </form>

  <button class="btn-primary" id="runCalc">Calculate</button>

  <!-- ‚îÄ‚îÄ QUICK-OUT METRICS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="grid-2col quick-out" style="margin-top:18px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;">
    <label>LMI (%)<input id="lmiPercentage" readonly></label>
    <label>LMI ($)<input id="lmiAmount" readonly></label>
    <label>Buy Price<input id="buyPrice" readonly></label>
    <label>Total Upfront<input id="totalCashUpfront" readonly></label>
    <label>Weekly Payment<input id="weeklyPayment" readonly></label>
  </div>

  <!-- ‚îÄ‚îÄ CHART + RESULTS TABLE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="chart-wrap" style="height:320px;margin-top:24px;">
    <canvas id="investmentChart"></canvas>
  </div>
  <div id="results" class="table-container" style="margin-top:24px;"></div>

  <p class="disclaimer">Figures are estimates only and do not constitute financial advice.</p>

  <!-- ‚îÄ‚îÄ PRO GATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="pro-gate" id="proGate" style="margin-top:32px;padding:24px;border:2px dashed #aaa;border-radius:8px;text-align:center;background:#fafafa;">
    <p class="locked-msg" style="margin:0 0 14px;font-weight:600;">üîí Extra results, CSV export &amp; save-scenario are Pro features.</p>
    <button id="unlockPro" class="btn-primary">Unlock Pro (A$9)</button>
  </div>

  <!-- ‚îÄ‚îÄ PRO BUTTONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="proButtons" class="pro-only" style="text-align:center;margin:18px 0;">
    <button id="btnSave" class="btn-primary" type="button">üíæ Save Scenario</button>
    <button id="btnCSV" class="btn-primary" type="button">‚¨áÔ∏è Download CSV</button>
  </div>
  <!-- Go-to-Planner shortcut (always visible) -->
  <div id="plannerShortcut" style="text-align:center;margin:24px 0;">
    <button id="goPlanner" class="btn-primary" disabled>üìà Go to Planner</button>
  </div>

</main>

<footer>¬© 2025 Tepuy Solutions. All rights reserved.</footer>

<script src="/js/property_vs_shares_calc.js"></script>
<script>
  /* NAV toggle */
  document.getElementById('menuToggle').onclick = () =>
    document.getElementById('navMenu').classList.toggle('show');
  document.querySelectorAll('.sub-toggle').forEach(btn =>
    btn.onclick = () => btn.parentElement.classList.toggle('open'));

  /* ---- Pro gating logic ---- */
  const isPro      = localStorage.getItem('pvProPaid') === 'yes';
  const proGate    = document.getElementById('proGate');
  const proButtons = document.getElementById('proButtons');
  const unlockBtn  = document.getElementById('unlockPro');
  const plannerBtn = document.getElementById('goPlanner');


  if (isPro) {
    proGate.style.display = 'none';
    proButtons.style.display = 'block';
    unlockBtn.textContent = 'Go to Planner';
  } else {
    proButtons.style.display = 'none';
  }
  /* --- Planner shortcut button --- */
  if (plannerBtn) {
    if (isPro) {
      plannerBtn.disabled = false;
      plannerBtn.onclick  = () => location.href = '/calculators/planner/index.html';
    } else {
      plannerBtn.disabled = true;
      plannerBtn.title    = 'Unlock Pro to access the Planner';
      plannerBtn.style.opacity = 0.5;
      plannerBtn.style.cursor  = 'not-allowed';
    }
  }

  if (unlockBtn) {
    unlockBtn.onclick = async () => {
      if (isPro) {
        location.href = '/calculators/planner/index.html';
        return;
      }
      unlockBtn.disabled = true;
      try {
        const r = await fetch('/.netlify/functions/createCheckout', { method: 'POST' });
        const j = await r.json();
        if (j.url) {
          location.href = j.url;
        } else {
          alert('Checkout link missing');
          unlockBtn.disabled = false;
        }
      } catch (err) {
        alert('Checkout error');
        unlockBtn.disabled = false;
      }
    };
  }
</script>

<!-- existing styles preserved -->
<style>
  .has-sub{position:relative}
  .sub-toggle{background:none;border:none;color:var(--text-light);cursor:pointer;font:inherit;margin-left:20px}
  .sub-menu{display:none;position:absolute;top:100%;left:0;background:var(--brand-green-dark);padding:8px 0;border-radius:4px;min-width:180px;z-index:999}
  .sub-menu a{display:block;padding:8px 18px;color:#fff;white-space:nowrap}
  .has-sub.open .sub-menu{display:block}
  @media(max-width:768px){
    .sub-toggle{margin:10px 0;font-size:1.1rem}
    .sub-menu{position:static}
    .nav-links{display:none;flex-direction:column;gap:14px}
    .nav-links.show{display:flex}
    .hamburger{display:block}
  }
  .pro-gate{margin-top:32px;padding:24px;border:2px dashed #aaa;border-radius:8px;text-align:center;background:#fafafa}
  .pro-gate .locked-msg{margin:0 0 14px;font-weight:600}
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;z-index:9999}
  .overlay-card{background:#fff;padding:28px 32px;border-radius:10px;max-width:380px;text-align:center;box-shadow:0 12px 30px rgba(0,0,0,.25)}
  main.blur{filter:blur(4px)}
</style>

</body>
</html>
