<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Property vs Shares â€¢ Tepuy Solutions</title>

  <!-- styles & favicon -->
  <link rel="stylesheet" href="/css/tepuy.css">
  <link rel="icon" href="/img/favicon.png" type="image/png">

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ NAVBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<header class="navbar">
  <div class="logo-title">
    <img src="/img/tepuy_logo.png" class="logo" alt="Tepuy logo">
    Tepuy Solutions
  </div>

  <nav class="nav-links" id="navMenu">
    <a class="active" href="/">Home</a>
    <a href="/calculators/property_vs_shares.html">Property&nbsp;vs&nbsp;Shares</a>
    <a href="/calculators/retirement.html">Retirement</a>
    <a href="/store/">Store</a>
    <a href="/blog/">Blog</a>
  </nav>

  <button id="menuToggle" class="hamburger" aria-label="Menu">&#9776;</button>
</header>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ HERO â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="hero">
  <div class="hero-banner">
    <h1>Property Investment vs Shares Calculator</h1>
    <p>Project net-worth growth in real estate versus an index-fund portfolio.</p>
  </div>
</section>

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€ MAIN â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<main class="calc-wrapper">

  <!-- INPUTS -->
  <form id="investmentForm" class="grid-3col">
    <label>Loan Amount <input id="loanAmount" value="800,000"></label>
    <label>Down-payment (%) <input id="downpayment" type="number" value="10" step=".1"></label>
    <label>Stamp Duty & Costs ($) <input id="buyingCosts" value="48,000"></label>

    <label>Loan Period (yrs) <input id="loanPeriod" type="number" value="30"></label>
    <label>Interest Rate (%)  <input id="loanInterestRate" type="number" value="6.5" step=".1"></label>
    <label>Owning Costs (%/yr)<input id="owningCosts" type="number" value="2"   step=".1"></label>

    <label>Agent Fees (%/yr)   <input id="agentFees" type="number" value="0.2" step=".1"></label>
    <label>Occupancy Rate (%)  <input id="occupancyRate" type="number" value="90"></label>
    <label>Appreciation (%/yr) <input id="propertyAppreciation" type="number" value="6.5" step=".1"></label>

    <label>Rental Yield (%/yr) <input id="rentalIncome" type="number" value="4.8" step=".1"></label>
    <label>Shares Return (%/yr)<input id="stockMarketAppreciation" type="number" value="11" step=".1"></label>
    <label>Tax Bracket (%)     <input id="taxBracket" type="number" value="30" step=".1"></label>

    <label>Years to Retirement  <input id="yearsToRetirement" type="number" value="30"></label>
    <label>Building Component (%)<input id="buildingComponent" type="number" value="50"></label>
  </form>

  <button class="btn-primary" id="runCalc">Calculate</button>

  <!-- QUICK OUTPUTS -->
  <div class="grid-2col quick-out">
    <label>LMI (%)        <input id="lmiPercentage"     readonly></label>
    <label>LMI ($)        <input id="lmiAmount"         readonly></label>
    <label>Buy Price      <input id="buyPrice"          readonly></label>
    <label>Total Upfront  <input id="totalCashUpfront"  readonly></label>
    <label>Weekly Payment <input id="weeklyPayment"     readonly></label>
  </div>

  <!-- CHART & TABLE -->
  <div class="chart-wrap" style="height:320px;"><canvas id="investmentChart"></canvas></div>
  <div id="results" class="table-container"></div>

  <p class="disclaimer">Figures are estimates only and do not constitute financial advice.</p>

  <!-- SOFT GATE -->
  <div class="pro-gate">
    <p class="locked-msg">ðŸ”’ Extra results, CSV export &amp; save-scenario are Pro features.</p>
    <button id="unlockPro" class="btn-primary">Unlock Pro (A$9)</button>
  </div>
</main>

<footer>Â© 2025 Tepuy Solutions. All rights reserved.</footer>

<!-- LIBS & CALC LOGIC -->
<script src="/js/property_vs_shares_calc.js"></script>

<script>
/* â”€â”€â”€ 1. Mobile menu â”€â”€â”€ */
document.getElementById('menuToggle').onclick =
  () => document.getElementById('navMenu').classList.toggle('show');

/* â”€â”€â”€ 2. Stripe Checkout â”€â”€â”€ */
async function startCheckout () {
  const btn = document.getElementById('unlockPro');
  btn.disabled = true;
  try {
    const res  = await fetch('/.netlify/functions/createCheckout',{method:'POST'});
    const json = await res.json();
    if (json.url) window.location.href = json.url;
    else { alert('Stripe error.'); btn.disabled = false; }
  } catch (err) {
    console.error(err);
    alert('Network error. Try again.');
    btn.disabled = false;
  }
}

/* â”€â”€â”€ 3. Soft-gate (temporary localStorage) â”€â”€â”€ */
const FREE_LIMIT = 3;
let   uses  = +localStorage.getItem('pvUses') || 0;
const paid  = localStorage.getItem('pvPaid') === 'yes';

const runBtn = document.getElementById('runCalc');
const gate   = document.querySelector('.pro-gate');

runBtn.onclick = () => {
  if (paid || uses < FREE_LIMIT) {
    window.calculate();
    if (!paid) {
      uses++; localStorage.setItem('pvUses', uses);
      if (uses >= FREE_LIMIT) gate.style.display = 'block';
    }
  } else {
    gate.style.display = 'block';
  }
};

if (paid) gate.style.display = 'none';
document.getElementById('unlockPro').onclick = startCheckout;
</script>

<!-- minimal in-page style â€“ keeps gate neat -->
<style>
  .pro-gate{margin-top:32px;padding:24px;border:2px dashed #aaa;border-radius:8px;text-align:center;background:#fafafa}
  .pro-gate .locked-msg{margin:0 0 14px;font-weight:600}
</style>
</body>
</html>
