<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Retirement Goal Calculator | Tepuy Solutions</title>

  <!-- brand assets -->
  <link rel="icon" type="image/png" href="/img/favicon.png"/>
  <link rel="stylesheet" href="/css/tepuy.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <!-- NAVBAR ----------------------------------------------------------- -->
  <header class="navbar">
    <div class="logo-title">
      <img src="/img/tepuy_logo.png" class="logo" alt="Tepuy logo">
      <strong>Tepuy Solutions</strong>
    </div>
    <nav>
      <a href="/">Home</a>
      <a href="/calculators/property_vs_shares.html">Rent vs Buy</a>
      <a href="/calculators/retirement.html">Retirement</a>
      <a href="/store/">Store</a>
      <a href="/blog/">Blog</a>
    </nav>
  </header>

  <!-- MAIN ------------------------------------------------------------- -->
  <section class="section" style="max-width:750px">
    <h1 style="text-align:center">Retirement Goal Calculator</h1>

    <!-- INPUT CARD -->
    <form id="retirementForm" class="card">
      <label>Current Age
        <input type="number" id="currentAge" value="45" min="0" max="120">
      </label>

      <label>Current Capital ($)
        <input type="text" id="currentCapital" value="100,000">
      </label>

      <label>Annual Return (%) <input type="number" id="rateOfReturn" value="7" step="0.1"></label>

      <label>Inflation (%) <input type="number" id="inflationRate" value="2.5" step="0.1"></label>

      <label>
        Safe Withdrawal Rate (%) 
        <small id="suggestedWithdrawal" style="display:block;font-weight:400;font-size:.9rem;color:var(--secondary-color)">
          Suggested: auto-calc
        </small>
        <input type="number" id="withdrawalRate" value="4.4" step="0.1">
      </label>

      <label>Monthly Contribution ($)
        <input type="text" id="monthlySavings" value="1,000">
      </label>

      <label>Target Monthly Income ($)
        <input type="text" id="desiredMonthlyIncome" value="4,000">
      </label>

      <button type="button" class="primary" style="width:100%;margin-top:24px" onclick="calculateRetirement()">
        Calculate&nbsp;ðŸŽ¯
      </button>
    </form>

    <!-- SUMMARY -->
    <div id="result" class="card" style="display:none;margin-top:20px"></div>

    <!-- PROJECTION TABLE -->
    <div class="card table-container" style="display:none;margin-top:20px">
      <table id="projectionTable">
        <thead>
          <tr><th>Age</th><th>Capital ($)</th><th>Infl-Adj Goal ($)</th><th>Annual Contrib ($)</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- DISCLAIMER -->
    <p class="card" style="background:#fff8e1;color:#7b5e00;margin-top:30px">
      <strong>Disclaimer:</strong> This tool provides general information only and does not take
      your personal circumstances into account. Seek licensed financial advice before making decisions.
    </p>
  </section>

  <footer>&copy; 2025 Tepuy Solutions</footer>

<!-- JS ----------------------------------------------------------------- -->
<script>
/* format fields with commas */
['currentCapital','monthlySavings','desiredMonthlyIncome'].forEach(id=>{
  const el=document.getElementById(id);
  el.addEventListener('input',()=>{
    const raw=el.value.replace(/,/g,'');
    if(!isNaN(raw)&&raw!=='') el.value=parseFloat(raw).toLocaleString();
  });
});

function suggestWR(){
  const r=(+rateOfReturn.value||0)/100,
        i=(+inflationRate.value||0)/100,
        w=((1+r)/(1+i)-1)*100;
  if(w>0){ withdrawalRate.value=w.toFixed(1);
    suggestedWithdrawal.textContent=`Suggested: ${w.toFixed(1)} %`; }
}
rateOfReturn.addEventListener('input',suggestWR);
inflationRate.addEventListener('input',suggestWR);
document.addEventListener('DOMContentLoaded',suggestWR);

function calculateRetirement(){
  const age        =+currentAge.value||0,
        capNow     =+currentCapital.value.replace(/,/g,'')||0,
        r          =(+rateOfReturn.value)/100,
        infl       =(+inflationRate.value)/100,
        wr         =(+withdrawalRate.value)/100,
        mContrib   =+monthlySavings.value.replace(/,/g,'')||0,
        mIncome    =+desiredMonthlyIncome.value.replace(/,/g,'')||0,
        goalToday  =(mIncome*12)/wr;

  let cap=capNow, yrs=0, rows='';
  const tbody=document.querySelector('#projectionTable tbody');
  tbody.innerHTML='';

  while(yrs<100){
    const goalAdj=goalToday*Math.pow(1+infl,yrs);
    const yearlyCon=mContrib*12*Math.pow(1+infl,yrs);

    rows+=`
      <tr>
        <td>${age+yrs}</td>
        <td>$${Math.round(cap).toLocaleString()}</td>
        <td>$${Math.round(goalAdj).toLocaleString()}</td>
        <td>$${Math.round(yearlyCon).toLocaleString()}</td>
      </tr>`;

    if(cap>=goalAdj) break;
    cap = cap*(1+r)+yearlyCon;
    yrs++;
  }
  tbody.innerHTML=rows;
  document.querySelector('.table-container').style.display='block';

  const res=document.getElementById('result');
  res.style.display='block';
  res.style.background= (yrs<100)?'#e8f5e9':'#ffebee';
  res.style.color       =(yrs<100)?'#1b5e20':'#c62828';
  res.textContent = (yrs<100)
    ? `ðŸŽ‰ Goal reached at age ${age+yrs} (in ${yrs} years) with â‰ˆ $${Math.round(cap).toLocaleString()}`
    : `âš ï¸ Goal not reachable within 100 years under current assumptions. Consider increasing contributions or return assumptions.`;
}
</script>
</body>
</html>
