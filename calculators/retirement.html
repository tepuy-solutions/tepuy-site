<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Retirement Calculator • Tepuy Solutions</title>

  <link rel="icon" href="/img/favicon.png" type="image/png">
  <link rel="stylesheet" href="/css/tepuy.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- ───────── NAVBAR (with dropdown) ───────── -->
<!-- ───────── NAVBAR (dropdown + mobile) ───────── -->
<div id="navbar-placeholder"></div>

<script>
  fetch("/includes/navbar.html")
    .then(res => res.text())
    .then(html => {
      document.getElementById("navbar-placeholder").innerHTML = html;

      // Enable mobile toggle after navbar is injected
      document.getElementById('menuToggle').onclick = () =>
        document.querySelector('.nav-links').classList.toggle('show');
    });
</script>

<section class="hero">
    <h1>Retirement Goal Calculator</h1>
    <p>Estimate the capital required to fund your target income in retirement.</p>
</section>

<main class="calc-wrapper">
  <form id="retForm" class="grid-3col">
    <label>Current Age <input id="curAge" type="number" value="50"></label>
    <label>Current Capital to Invest ($) <input id="curCap" value="100,000"></label>
    <label>Expected Annual Return (%) <input id="annRet" type="number" value="8" step=".1"></label>
    <label>Expected Inflation Rate (%) <input id="infl" type="number" value="2.5" step=".1"></label>
    <label>Withdrawal Rate (%) <small id="recRateLabel" class="suggest">(suggested 5.4 %)</small>
      <input id="wdRate" type="number" value="5.4" step=".1"></label>
    <label>Monthly Contributions ($) <input id="monthlyContrib" value="1,000"></label>
    <label>Target Monthly Income ($) <input id="targetMonthly" value="5,000"></label>
  </form>

  <button class="btn-primary" onclick="runRetirementCalc()">Calculate</button>

  <p id="quickMsg" class="result-box" hidden></p>

  <canvas id="retChart" height="230"></canvas>

  <div id="retResults" class="table-container"></div>

<p class="disclaimer">
  This tool is intended for premium users and provides advanced projections, including detailed tax breakdowns and annual sale modeling. All results are estimates and should not be considered financial advice. Please consult a qualified professional before making investment decisions.
</p>
</main>

<footer>© 2025 Tepuy Solutions</footer>

<script src="/js/retirement_calc.js"></script>
<script>
  const menuToggle = document.getElementById('menuToggle');
  const navMenu = document.getElementById('navMenu');
  menuToggle.addEventListener('click', () => {
    navMenu.classList.toggle('show');
  });

  document.querySelectorAll('.sub-toggle').forEach(btn =>
    btn.onclick = () => btn.parentElement.classList.toggle('open'));
</script>

<!-- Scoped dropdown menu styling -->
<style>
  .has-sub { position: relative; }
  .sub-toggle {
    background: none;
    border: none;
    color: var(--text-light);
    cursor: pointer;
    font: inherit;
    margin-left: 20px;
  }
  .sub-menu {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background: var(--brand-green-dark);
    padding: 8px 0;
    border-radius: 4px;
    min-width: 180px;
    z-index: 999;
  }
  .sub-menu a {
    display: block;
    padding: 8px 18px;
    color: #fff;
    white-space: nowrap;
  }
  .has-sub.open .sub-menu {
    display: block;
  }
  @media(max-width:768px) {
    .sub-toggle { margin: 10px 0; font-size: 1.1rem; }
    .sub-menu { position: static; }
    .nav-links { display: none; flex-direction: column; gap: 14px; }
    .nav-links.show { display: flex; }
    .hamburger { display: block; }
  }
</style>

</body>
</html>
