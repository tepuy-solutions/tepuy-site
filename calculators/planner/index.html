<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Property vs Shares ‚Äì Planner Pro | Tepuy</title>
  <link rel="icon" href="/img/favicon.png" />
  <link rel="stylesheet" href="/css/tepuy.css" />
  <script>
    if (localStorage.getItem('pvProPaid') !== 'yes') location.replace('/store.html');
  </script>
</head>
<body>
<div class="calc-wrapper">
  <h1>üìä Property vs Shares ‚Äî Planner Edition</h1>

  <form id="plannerForm" class="grid-3col">
    <!-- ‚îÄ‚îÄ‚îÄ USER PROFILE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <fieldset>
      <legend>User profile</legend>
      <label>Current age <input id="age" type="number" value="45"></label>
      <label>Retire age <input id="retAge" type="number" value="67"></label>
      <label>Marginal tax rate (%) <input id="taxRate" type="number" value="47"></label>
      <label><input id="partner" type="checkbox"> Include partner (split trust gains)</label>
      <label>Salary before rental ($/yr) <input id="salary" value="120,000"></label>
    </fieldset>

    <!-- ‚îÄ‚îÄ‚îÄ PROPERTY INPUTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <fieldset>
      <legend>Property</legend>
      <label>Purchase price ($) <input id="propPrice" value="1,000,000"></label>
      <label>LVR (%) <input id="propLVR" type="number" value="90"></label>
      <label>Loan interest rate (%) <input id="loanRate" type="number" value="6.5" step=".1"></label>
      <label>Rental yield (%/yr) <input id="rentYield" type="number" value="4.5" step=".1"></label>
      <label>Appreciation (%/yr) <input id="propGrowth" type="number" value="6" step=".1"></label>
      <label>Expenses (%/yr) <input id="propExp" type="number" value="2" step=".1"></label>
      <label>Depreciation claimed ($) <input id="propDep" value="200,000"></label>
      <label>Building cost (% of price) <input id="buildPct" type="number" value="60" step=".1"></label>
      <label>Plant cost (% of price) <input id="plantPct" type="number" value="10" step=".1"></label>
    </fieldset>

    <!-- ‚îÄ‚îÄ‚îÄ SHARES INPUTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <fieldset>
      <legend>Shares</legend>
      <label>Lump sum invested ($) <input id="sharesInit" value="1,000,000"></label>
      <label>Total return (%/yr) <input id="sharesRet" type="number" value="9" step=".1"></label>
      <label>Dividend yield (%/yr) <input id="divYield" type="number" value="4" step=".1"></label>
    </fieldset>

    <!-- ‚îÄ‚îÄ‚îÄ SCENARIOS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <fieldset class="wide">
      <legend>Compare scenarios</legend>
      <div class="scenario-grid">
        <label><input type="checkbox" name="structure" value="IND-NG" checked> Individual ‚Äì neg geared</label>
        <label><input type="checkbox" name="structure" value="IND-SELL-TO-SUPER"> Sell ‚Üí contribute to super</label>
        <label><input type="checkbox" name="structure" value="IND-HOLD-TILL-DEATH"> Hold till death (CG reset)</label>
        <label><input type="checkbox" name="structure" value="F-TRUST"> Family trust (2 bene.)</label>
        <label><input type="checkbox" name="structure" value="COMPANY"> Company-owned</label>
        <label title="Coming soon: SMSF support for high-income professionals">
          <input type="checkbox" name="structure" value="SMSF-ACC" disabled> SMSF ‚Äì accumulation
        </label>
        <label title="Coming soon: SMSF support for high-income professionals">
          <input type="checkbox" name="structure" value="SMSF-PENS" disabled> SMSF ‚Äì pension
        </label>
        <label title="Coming soon: SMSF support for high-income professionals">
          <input type="checkbox" name="structure" value="SHARES-SMSF" disabled> Shares ‚Äì inside SMSF
        </label>
        <label>Sale costs (% of price) <input id="saleCostPct" type="number" value="2.5" step=".1"></label>
      </div>
    </fieldset>

    <button id="runBtn" type="submit" class="btn-primary full-width">Run comparison</button>
  </form>

  <div class="pro-toolbar">
    <button id="btnSave" class="btn-primary" style="display:none;">üíæ Save Scenario</button>
    <button id="btnCSV" class="btn-primary" style="display:none;">‚¨áÔ∏è Download CSV</button>
  </div>

  <canvas id="chart" class="chart"></canvas>
  <div id="results"></div>
</div>

<!-- libs + app -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2"></script>
<script type="module" src="src/ui.js"></script>
<script type="module" src="src/storage.js"></script>
<script>
  const params = new URLSearchParams(window.location.search);
  const set = (id, val) => {
    const el = document.getElementById(id);
    if (el && val !== null) el.value = val;
  };

  set("age", params.get("age"));
  set("retAge", params.get("retAge"));
  set("taxRate", params.get("taxRate"));
  set("propPrice", params.get("propPrice"));
  set("propLVR", params.get("propLVR"));
  set("loanRate", params.get("loanRate"));
  set("rentYield", params.get("rentYield"));
  set("propGrowth", params.get("propGrowth"));
  set("propExp", params.get("propExp"));
  set("propDep", params.get("propDep"));
  set("sharesInit", params.get("sharesInit"));
  set("sharesRet", params.get("sharesRet"));
  set("divYield", params.get("divYield"));
</script>
</body>
</html>
